(()=>{"use strict";const t=document.querySelector(".settings"),e=document.querySelector(".settings-popup"),n=document.querySelector(".popup-close"),c=document.querySelector(".en"),o=document.querySelector(".rus"),i=document.querySelector(".language"),s=document.querySelector(".hide-widget"),a=(document.querySelector(".hide-widget-options"),document.querySelector(".time-widget")),r=document.querySelector(".date-widget"),d=document.querySelector(".greeting-widget"),l=document.querySelector(".quote-widget"),u=document.querySelector(".weather-widget"),m=document.querySelector(".player-widget"),v=document.querySelector(".footer"),y=document.querySelector(".weather"),L=document.querySelector(".player"),p=document.querySelector(".todo-widget"),g=document.querySelector(".todo");function f(){c.classList.contains("active")&&(i.textContent="language:",c.textContent="en",o.textContent="rus",s.textContent="hide widget:",a.textContent="time",r.textContent="day",d.textContent="greeting",l.textContent="quote",u.textContent="weather",m.textContent="player",p.textContent="todo list"),o.classList.contains("active")&&(i.textContent="язык:",c.textContent="анг",o.textContent="ру",s.textContent="скрыть виджет:",a.textContent="время",r.textContent="день",d.textContent="приветствие",l.textContent="цитата",u.textContent="погода",m.textContent="плеер",p.textContent="todo лист")}function S(t){t.classList.toggle("active")}function h(t){t.target===a&&(S(a),j.style.opacity=0),t.target===r&&(S(r),W.style.opacity=0),t.target===d&&(S(d),k.style.opacity=0),t.target===l&&(S(l),v.style.opacity=0),t.target===u&&(S(u),y.style.opacity=0),t.target===m&&(S(m),L.style.opacity=0),t.target===p&&(S(p),g.style.opacity=0)}function q(t){t.target===a&&a.classList.contains("active")&&(j.style.opacity=1),t.target===r&&r.classList.contains("active")&&(W.style.opacity=1),t.target===d&&d.classList.contains("active")&&(k.style.opacity=1),t.target===l&&l.classList.contains("active")&&(v.style.opacity=1),t.target===u&&u.classList.contains("active")&&(y.style.opacity=1),t.target===m&&m.classList.contains("active")&&(L.style.opacity=1),t.target===p&&p.classList.contains("active")&&(g.style.opacity=1)}t.addEventListener("click",(function(){t.style.display="none",e.classList.add("active")})),n.addEventListener("click",(function(){t.style.display="block",e.classList.remove("active")})),c.addEventListener("click",(()=>{o.classList.remove("active"),c.classList.add("active")})),c.addEventListener("click",f),o.addEventListener("click",(()=>{c.classList.remove("active"),o.classList.add("active")})),o.addEventListener("click",f),a.addEventListener("click",h),a.addEventListener("click",q),r.addEventListener("click",h),r.addEventListener("click",q),d.addEventListener("click",h),d.addEventListener("click",q),l.addEventListener("click",h),l.addEventListener("click",q),u.addEventListener("click",h),u.addEventListener("click",q),m.addEventListener("click",h),m.addEventListener("click",q),p.addEventListener("click",h),p.addEventListener("click",q);const E=new Date,C=document.querySelector(".greeting"),w=E.getHours(),x=document.querySelector(".name"),k=document.querySelector(".greeting-container");function $(){return w>=0&&w<=5?"night":w>=6&&w<=11?"morning":w>=12&&w<=17?"afternoon":w>=18&&w<=23?"evening":void 0}const I=`Good ${$()},`,b=w>=0&&w<=5?"Доброй ночи,":w>=6&&w<=11?"Доброго утра,":w>=12&&w<=17?"Добрый день,":w>=18&&w<=23?"Добрый вечер,":void 0;function A(t){(c.classList.contains("active")||t===c)&&(C.textContent=I,x.setAttribute("placeholder","[Enter name]")),(o.classList.contains("active")||t===o)&&(C.textContent=b,x.setAttribute("placeholder","[Имя]"))}function M(){localStorage.setItem("name",x.value)}function T(){localStorage.getItem("name")&&(x.value=localStorage.getItem("name"))}o.addEventListener("click",A),c.addEventListener("click",A),window.addEventListener("beforeunload",M),window.addEventListener("load",T);const j=document.querySelector(".time"),W=document.querySelector(".date"),D=document.body;function H(t,e){return Math.floor(Math.random()*(e-t)+t)}const N=document.querySelector(".slide-prev"),F=document.querySelector(".slide-next");let Y=H(1,20);function J(){const t=$();let e=Y;e<10&&(e=`0${e}`);const n=new Image;n.src=`../dist/assets/img/images/${t}/${e}.jpg`,n.onload=()=>{D.style.backgroundImage=`url('../dist/assets/img/images/${t}/${e}.jpg')`}}F.addEventListener("click",(function(){return J(),20===Y?Y=1:Y+=1})),N.addEventListener("click",(function(){return J(),1===Y?Y=20:Y-=1}));const O=document.querySelector(".weather-icon"),R=document.querySelector(".temperature"),U=document.querySelector(".weather-description"),X=document.querySelector(".city"),G=document.querySelector(".wind"),Z=document.querySelector(".humidity"),z=document.querySelector(".weather-error"),B=document.querySelector(".weather");async function K(){let t;c.classList.contains("active")?X.setAttribute("value","New York"):o.classList.contains("active")&&X.setAttribute("value","Нью-Йорк"),c.classList.contains("active")&&(t=`https://api.openweathermap.org/data/2.5/weather?q=${X.value}&lang=en&appid=e40bb5f53a4497757c0fd52d1d0219d3&units=imperial`),o.classList.contains("active")&&(t=`https://api.openweathermap.org/data/2.5/weather?q=${X.value}&lang=ru&appid=e40bb5f53a4497757c0fd52d1d0219d3&units=metric`);const e=await fetch(t),n=await e.json();try{P(),O.className="weather-icon owf",O.classList.add(`owf-${n.weather[0].id}`),c.classList.contains("active")&&(R.textContent=`${Math.floor(n.main.temp)}°F`,G.textContent=`Wind speed: ${Math.floor(n.wind.speed)} mph`,Z.textContent=`Humidity: ${n.main.humidity}%`),o.classList.contains("active")&&(R.textContent=`${Math.floor(n.main.temp)}°C`,G.textContent=`Скорость ветра: ${Math.floor(n.wind.speed)} m/s`,Z.textContent=`Влажность: ${n.main.humidity}%`),U.textContent=n.weather[0].description}catch(t){c.classList.contains("active")&&(z.textContent="Error! City not found"),o.classList.contains("active")&&(z.textContent="Ошибка! Город не найден"),R.classList.add("hidden"),U.classList.add("hidden"),G.classList.add("hidden"),Z.classList.add("hidden"),B.style.justifyContent="start"}}function P(){z.textContent="",R.classList.remove("hidden"),U.classList.remove("hidden"),G.classList.remove("hidden"),Z.classList.remove("hidden"),B.style.justifyContent="start"}X.addEventListener("change",K),o.addEventListener("click",K),c.addEventListener("click",K),window.addEventListener("beforeunload",(function(){return""===X.value&&P(),localStorage.setItem("city",X.value)})),window.addEventListener("load",(function(){localStorage.getItem("city")&&(X.value=localStorage.getItem("city"),K())}));const Q=document.querySelector(".change-quote"),V=document.querySelector(".quote"),_=document.querySelector(".author");async function tt(){let t;try{c.classList.contains("active")&&(t=t="data-en.json"),o.classList.contains("active")&&(t="data.json");const e=await fetch(t),n=await e.json();if(c.classList.contains("active")){let t=H(0,40);V.textContent=`"${n[t].quote}"`,_.textContent=n[t].author}if(o.classList.contains("active")){let t=H(0,20);V.textContent=`"${n[t].text}"`,_.textContent=`${n[t].author}`}}catch(t){c.classList.contains("active")&&(V.textContent="Error! quote not found"),o.classList.contains("active")&&(V.textContent="Ошибка! Цитата не найдена"),_.textContent=""}}Q.addEventListener("click",tt),o.addEventListener("click",tt),c.addEventListener("click",tt);const et=[{title:"Aqua Caelestis",src:"assets/sounds/Aqua Caelestis.mp3",duration:"00:39"},{title:"Ennio Morricone",src:"assets/sounds/Ennio Morricone.mp3",duration:"01:37"},{title:"River Flows In You",src:"assets/sounds/River Flows In You.mp3",duration:"01:37"},{title:"Summer Wind",src:"assets/sounds/Summer Wind.mp3",duration:"01:50"}],nt=(document.querySelector(".player-controls"),document.querySelector(".play-prev")),ct=document.querySelector(".play"),ot=document.querySelector(".play-next"),it=document.querySelector(".play-list"),st=document.querySelector(".song"),at=document.querySelector(".progress"),rt=document.querySelector(".progress-cotainer"),dt=document.querySelector(".volume"),lt=(document.querySelector(".volume-off"),document.querySelector(".volume-cotainer")),ut=document.querySelector(".volume-progress"),mt=document.querySelector(".time-current"),vt=document.querySelector(".time-duration");let yt=!1,Lt=0,pt=0;const gt=new Audio;function ft(){gt.src=et[Lt].src,gt.currentTime=pt,gt.play(),yt=!0}function St(){Lt===et.length-1?Lt=0:Lt+=1,wt(Lt),!0===yt&&(pt=0,ft()),ht(),qt()}function ht(){return st.textContent=et[Lt].title}function qt(){const t=et[Lt].duration;return vt.textContent=t}setInterval((function(t){if(!0===yt){const t=function(t){let e=parseInt(t),n=parseInt(e/60);e-=60*n;const c=parseInt(n/60);return n-=60*c,0===c?`${String(n).padStart(2,0)}:${String(e%60).padStart(2,0)}`:`${String(c).padStart(2,0)}:${String(n).padStart(2,0)}:${String(e%60).padStart(2,0)}`}(gt.currentTime);return mt.textContent=`${t}`}}),1e3),et.forEach(((t,e)=>{!function(t){const e=document.createElement("li");e.classList.add("play-item","play-single-item"),e.textContent=`${et[t].title}`,it.append(e)}(e)}));const Et=document.querySelectorAll(".play-item"),Ct=Array.from(Et);function wt(t){Ct.forEach((t=>{t.classList.remove("active")})),Ct[t].classList.add("active")}Et[0].classList.add("active"),ct.addEventListener("click",(function(){!1===yt?ft():(gt.pause(),yt=!1,pt=gt.currentTime),qt()})),ct.addEventListener("click",(function(){ct.classList.toggle("pause")})),ot.addEventListener("click",St),nt.addEventListener("click",(function(){0===Lt?Lt=et.length-1:Lt-=1,wt(Lt),!0===yt&&(pt=0,ft()),ht(),qt()})),gt.addEventListener("ended",St),gt.addEventListener("timeupdate",(function(t){const{duration:e,currentTime:n}=t.srcElement,c=n/e*100;at.style.width=`${c}%`})),rt.addEventListener("click",(function(t){const e=this.clientWidth,n=t.offsetX,c=gt.duration;!0===yt&&(gt.currentTime=n/e*c)})),dt.addEventListener("click",(function(){!1===gt.muted?gt.muted=!0:gt.muted=!1,dt.classList.toggle("volume-off")})),lt.addEventListener("click",(function(t){const e=this.clientWidth,n=t.offsetX,c=n/e*100;gt.volume=n/e,ut.style.width=`${c}%`}));const xt=document.querySelectorAll(".play-single-item");it.addEventListener("click",(t=>{let e=t.target.closest(".play-item");var n;e&&(e.textContent===et[0].title&&(Lt=0),e.textContent===et[1].title&&(Lt=1),e.textContent===et[2].title&&(Lt=2),e.textContent===et[3].title&&(Lt=3),ft(),ht(),ct.classList.add("pause"),n=e,xt.forEach((t=>{t.classList.remove("active")})),n.classList.add("active"))}));const kt=document.querySelector(".todo-add"),$t=document.querySelector(".todo-input"),It=document.querySelector(".todo-list");let bt;function At(t){this.description=t,this.completed=!1}bt=localStorage.tasks?JSON.parse(localStorage.getItem("tasks")):[];let Mt,Tt,jt=[];function Wt(){localStorage.setItem("tasks",JSON.stringify(bt))}function Dt(){It.innerHTML="",bt.length>0&&(function(){const t=bt.length&&bt.filter((t=>!1===t.completed)),e=bt.length&&bt.filter((t=>!0===t.completed));bt=[...t,...e]}(),bt.forEach(((t,e)=>{var n;n=t,It.innerHTML+=`<div class="todo-item ${n.completed?"checked":""}">\n         <div class="todo-description">${n.description}</div>\n         <div class="todo-buttons">\n            <input class="todo-complete" type="checkbox" ${n.completed?"checked":""}>\n            <div class="close"> \n               <img class="todo-image" src="assets/svg/add.svg" alt="">\n            </div>\n         </div>\n      </div>`})),jt=document.querySelectorAll(".todo-item"),Mt=document.querySelectorAll(".todo-complete"),Tt=document.querySelectorAll(".close"),Mt.forEach(((t,e)=>{t.addEventListener("click",(()=>{!function(t){bt[t].completed=!bt[t].completed,bt[t].completed?jt[t].classList.add("checked"):jt[t].classList.remove("checked"),Wt(),Dt()}(e)}))})),Tt.forEach(((t,e)=>{t.addEventListener("click",(()=>{!function(t){jt[t].classList.add("deletion"),setTimeout((()=>{bt.splice(t,1),Wt(),Dt()}),500)}(e)}))})))}kt.addEventListener("click",(()=>{bt.push(new At($t.value)),Wt(),Dt(),$t.value=""})),$t.addEventListener("keydown",(t=>{13===t.keyCode&&(bt.push(new At($t.value)),Wt(),Dt(),$t.value="")})),setInterval((function(){const t=new Date,e=t.toLocaleTimeString();j.textContent=e;const n={weekday:"long",month:"long",day:"numeric",year:"numeric",timeZone:"UTC"};if(c.classList.contains("active")){A(c);const e=t.toLocaleDateString("en-US",n);W.textContent=e}if(o.classList.contains("active")){A(o);const e=t.toLocaleDateString("ru",n);W.textContent=e}}),1e3),window.addEventListener("beforeunload",M),window.addEventListener("load",T),J(),K(),tt(),Dt()})();