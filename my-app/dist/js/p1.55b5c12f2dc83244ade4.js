(()=>{"use strict";const t=document.querySelector(".settings"),e=document.querySelector(".settings-popup"),n=document.querySelector(".popup-close"),c=document.querySelector(".en"),o=document.querySelector(".rus"),i=document.querySelector(".language"),s=document.querySelector(".hide-widget"),a=(document.querySelector(".hide-widget-options"),document.querySelector(".time-widget")),r=document.querySelector(".date-widget"),d=document.querySelector(".greeting-widget"),l=document.querySelector(".quote-widget"),u=document.querySelector(".weather-widget"),m=document.querySelector(".player-widget"),v=document.querySelector(".footer"),y=document.querySelector(".weather"),p=document.querySelector(".player");function L(){c.classList.contains("active")&&(i.textContent="language:",c.textContent="en",o.textContent="rus",s.textContent="hide widget:",a.textContent="time",r.textContent="day",d.textContent="greeting",l.textContent="quote",u.textContent="weather",m.textContent="player"),o.classList.contains("active")&&(i.textContent="язык:",c.textContent="анг",o.textContent="ру",s.textContent="скрыть виджет:",a.textContent="время",r.textContent="день",d.textContent="приветствие",l.textContent="цитата",u.textContent="погода",m.textContent="плеер")}function g(t){t.classList.toggle("active")}function f(t){t.target===a&&(g(a),M.style.opacity=0),t.target===r&&(g(r),T.style.opacity=0),t.target===d&&(g(d),C.style.opacity=0),t.target===l&&(g(l),v.style.opacity=0),t.target===u&&(g(u),y.style.opacity=0),t.target===m&&(g(m),p.style.opacity=0)}function S(t){t.target===a&&a.classList.contains("active")&&(M.style.opacity=1),t.target===r&&r.classList.contains("active")&&(T.style.opacity=1),t.target===d&&d.classList.contains("active")&&(C.style.opacity=1),t.target===l&&l.classList.contains("active")&&(v.style.opacity=1),t.target===u&&u.classList.contains("active")&&(y.style.opacity=1),t.target===m&&m.classList.contains("active")&&(p.style.opacity=1)}t.addEventListener("click",(function(){t.style.display="none",e.classList.add("active")})),n.addEventListener("click",(function(){t.style.display="block",e.classList.remove("active")})),c.addEventListener("click",(()=>{o.classList.remove("active"),c.classList.add("active")})),c.addEventListener("click",L),o.addEventListener("click",(()=>{c.classList.remove("active"),o.classList.add("active")})),o.addEventListener("click",L),a.addEventListener("click",f),a.addEventListener("click",S),r.addEventListener("click",f),r.addEventListener("click",S),d.addEventListener("click",f),d.addEventListener("click",S),l.addEventListener("click",f),l.addEventListener("click",S),u.addEventListener("click",f),u.addEventListener("click",S),m.addEventListener("click",f),m.addEventListener("click",S);const h=new Date,q=document.querySelector(".greeting"),E=h.getHours(),w=document.querySelector(".name"),C=document.querySelector(".greeting-container");function k(){return E>=0&&E<=5?"night":E>=6&&E<=11?"morning":E>=12&&E<=17?"afternoon":E>=18&&E<=23?"evening":void 0}const x=`Good ${k()},`,$=E>=0&&E<=5?"Доброй ночи,":E>=6&&E<=11?"Доброго утра,":E>=12&&E<=17?"Добрый день,":E>=18&&E<=23?"Добрый вечер,":void 0;function b(t){(c.classList.contains("active")||t===c)&&(q.textContent=x,w.setAttribute("placeholder","[Enter name]")),(o.classList.contains("active")||t===o)&&(q.textContent=$,w.setAttribute("placeholder","[Имя]"))}function I(){localStorage.setItem("name",w.value)}function A(){localStorage.getItem("name")&&(w.value=localStorage.getItem("name"))}o.addEventListener("click",b),c.addEventListener("click",b),window.addEventListener("beforeunload",I),window.addEventListener("load",A);const M=document.querySelector(".time"),T=document.querySelector(".date"),j=document.body;function W(t,e){return Math.floor(Math.random()*(e-t)+t)}const D=document.querySelector(".slide-prev"),H=document.querySelector(".slide-next");let N=W(1,20);function F(){const t=k();let e=N;e<10&&(e=`0${e}`);const n=new Image;n.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`,n.onload=()=>{j.style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg')`}}H.addEventListener("click",(function(){return F(),20===N?N=1:N+=1})),D.addEventListener("click",(function(){return F(),1===N?N=20:N-=1}));const Y=document.querySelector(".weather-icon"),J=document.querySelector(".temperature"),O=document.querySelector(".weather-description"),R=document.querySelector(".city"),U=document.querySelector(".wind"),X=document.querySelector(".humidity"),G=document.querySelector(".weather-error"),Z=document.querySelector(".weather");async function z(){let t;c.classList.contains("active")?R.setAttribute("value","New York"):o.classList.contains("active")&&R.setAttribute("value","Нью-Йорк"),c.classList.contains("active")&&(t=`https://api.openweathermap.org/data/2.5/weather?q=${R.value}&lang=en&appid=e40bb5f53a4497757c0fd52d1d0219d3&units=imperial`),o.classList.contains("active")&&(t=`https://api.openweathermap.org/data/2.5/weather?q=${R.value}&lang=ru&appid=e40bb5f53a4497757c0fd52d1d0219d3&units=metric`);const e=await fetch(t),n=await e.json();try{B(),Y.className="weather-icon owf",Y.classList.add(`owf-${n.weather[0].id}`),c.classList.contains("active")&&(J.textContent=`${Math.floor(n.main.temp)}°F`,U.textContent=`Wind speed: ${Math.floor(n.wind.speed)} mph`,X.textContent=`Humidity: ${n.main.humidity}%`),o.classList.contains("active")&&(J.textContent=`${Math.floor(n.main.temp)}°C`,U.textContent=`Скорость ветра: ${Math.floor(n.wind.speed)} m/s`,X.textContent=`Влажность: ${n.main.humidity}%`),O.textContent=n.weather[0].description}catch(t){c.classList.contains("active")&&(G.textContent="Error! City not found"),o.classList.contains("active")&&(G.textContent="Ошибка! Город не найден"),J.classList.add("hidden"),O.classList.add("hidden"),U.classList.add("hidden"),X.classList.add("hidden"),Z.style.justifyContent="start"}}function B(){G.textContent="",J.classList.remove("hidden"),O.classList.remove("hidden"),U.classList.remove("hidden"),X.classList.remove("hidden"),Z.style.justifyContent="start"}R.addEventListener("change",z),o.addEventListener("click",z),c.addEventListener("click",z),window.addEventListener("beforeunload",(function(){return""===R.value&&B(),localStorage.setItem("city",R.value)})),window.addEventListener("load",(function(){localStorage.getItem("city")&&(R.value=localStorage.getItem("city"),z())}));const K=document.querySelector(".change-quote"),P=document.querySelector(".quote"),Q=document.querySelector(".author");async function V(){let t;try{c.classList.contains("active")&&(t=t="data-en.json"),o.classList.contains("active")&&(t="data.json");const e=await fetch(t),n=await e.json();if(c.classList.contains("active")){let t=W(0,40);P.textContent=`"${n[t].quote}"`,Q.textContent=n[t].author}if(o.classList.contains("active")){let t=W(0,20);P.textContent=`"${n[t].text}"`,Q.textContent=`${n[t].author}`}}catch(t){c.classList.contains("active")&&(P.textContent="Error! quote not found"),o.classList.contains("active")&&(P.textContent="Ошибка! Цитата не найдена"),Q.textContent=""}}K.addEventListener("click",V),o.addEventListener("click",V),c.addEventListener("click",V);const _=[{title:"Aqua Caelestis",src:"assets/sounds/Aqua Caelestis.mp3",duration:"00:39"},{title:"Ennio Morricone",src:"assets/sounds/Ennio Morricone.mp3",duration:"01:37"},{title:"River Flows In You",src:"assets/sounds/River Flows In You.mp3",duration:"01:37"},{title:"Summer Wind",src:"assets/sounds/Summer Wind.mp3",duration:"01:50"}],tt=(document.querySelector(".player-controls"),document.querySelector(".play-prev")),et=document.querySelector(".play"),nt=document.querySelector(".play-next"),ct=document.querySelector(".play-list"),ot=document.querySelector(".song"),it=document.querySelector(".progress"),st=document.querySelector(".progress-cotainer"),at=document.querySelector(".volume"),rt=(document.querySelector(".volume-off"),document.querySelector(".volume-cotainer")),dt=document.querySelector(".volume-progress"),lt=document.querySelector(".time-current"),ut=document.querySelector(".time-duration");let mt=!1,vt=0,yt=0;const pt=new Audio;function Lt(){pt.src=_[vt].src,pt.currentTime=yt,pt.play(),mt=!0}function gt(){vt===_.length-1?vt=0:vt+=1,Et(vt),!0===mt&&(yt=0,Lt()),ft(),St()}function ft(){return ot.textContent=_[vt].title}function St(){const t=_[vt].duration;return ut.textContent=t}setInterval((function(t){if(!0===mt){const t=function(t){let e=parseInt(t),n=parseInt(e/60);e-=60*n;const c=parseInt(n/60);return n-=60*c,0===c?`${String(n).padStart(2,0)}:${String(e%60).padStart(2,0)}`:`${String(c).padStart(2,0)}:${String(n).padStart(2,0)}:${String(e%60).padStart(2,0)}`}(pt.currentTime);return lt.textContent=`${t}`}}),1e3),_.forEach(((t,e)=>{!function(t){const e=document.createElement("li");e.classList.add("play-item","play-single-item"),e.textContent=`${_[t].title}`,ct.append(e)}(e)}));const ht=document.querySelectorAll(".play-item"),qt=Array.from(ht);function Et(t){qt.forEach((t=>{t.classList.remove("active")})),qt[t].classList.add("active")}ht[0].classList.add("active"),et.addEventListener("click",(function(){!1===mt?Lt():(pt.pause(),mt=!1,yt=pt.currentTime),St()})),et.addEventListener("click",(function(){et.classList.toggle("pause")})),nt.addEventListener("click",gt),tt.addEventListener("click",(function(){0===vt?vt=_.length-1:vt-=1,Et(vt),!0===mt&&(yt=0,Lt()),ft(),St()})),pt.addEventListener("ended",gt),pt.addEventListener("timeupdate",(function(t){const{duration:e,currentTime:n}=t.srcElement,c=n/e*100;it.style.width=`${c}%`})),st.addEventListener("click",(function(t){const e=this.clientWidth,n=t.offsetX,c=pt.duration;!0===mt&&(pt.currentTime=n/e*c)})),at.addEventListener("click",(function(){!1===pt.muted?pt.muted=!0:pt.muted=!1,at.classList.toggle("volume-off")})),rt.addEventListener("click",(function(t){const e=this.clientWidth,n=t.offsetX,c=n/e*100;pt.volume=n/e,dt.style.width=`${c}%`}));const wt=document.querySelectorAll(".play-single-item");ct.addEventListener("click",(t=>{let e=t.target.closest(".play-item");var n;e&&(e.textContent===_[0].title&&(vt=0),e.textContent===_[1].title&&(vt=1),e.textContent===_[2].title&&(vt=2),e.textContent===_[3].title&&(vt=3),Lt(),ft(),et.classList.add("pause"),n=e,wt.forEach((t=>{t.classList.remove("active")})),n.classList.add("active"))}));const Ct=document.querySelector(".todo-add"),kt=document.querySelector(".todo-input"),xt=document.querySelector(".todo-list");let $t;function bt(t){this.description=t,this.completed=!1}$t=localStorage.tasks?JSON.parse(localStorage.getItem("tasks")):[];let It,At,Mt=[];function Tt(){localStorage.setItem("tasks",JSON.stringify($t))}function jt(){xt.innerHTML="",$t.length>0&&(function(){const t=$t.length&&$t.filter((t=>!1===t.completed)),e=$t.length&&$t.filter((t=>!0===t.completed));$t=[...t,...e]}(),$t.forEach(((t,e)=>{var n;n=t,xt.innerHTML+=`<div class="todo-item ${n.completed?"checked":""}">\n         <div class="todo-description">${n.description}</div>\n         <div class="todo-buttons">\n            <input class="todo-complete" type="checkbox" ${n.completed?"checked":""}>\n            <div class="close"> \n               <img class="todo-image" src="assets/svg/add.svg" alt="">\n            </div>\n         </div>\n      </div>`})),Mt=document.querySelectorAll(".todo-item"),It=document.querySelectorAll(".todo-complete"),At=document.querySelectorAll(".close"),It.forEach(((t,e)=>{t.addEventListener("click",(()=>{!function(t){$t[t].completed=!$t[t].completed,$t[t].completed?Mt[t].classList.add("checked"):Mt[t].classList.remove("checked"),Tt(),jt()}(e)}))})),At.forEach(((t,e)=>{t.addEventListener("click",(()=>{!function(t){Mt[t].classList.add("deletion"),setTimeout((()=>{$t.splice(t,1),Tt(),jt()}),500)}(e)}))})))}Ct.addEventListener("click",(()=>{$t.push(new bt(kt.value)),Tt(),jt(),kt.value=""})),kt.addEventListener("keydown",(t=>{13===t.keyCode&&($t.push(new bt(kt.value)),Tt(),jt(),kt.value="")})),setInterval((function(){const t=new Date,e=t.toLocaleTimeString();M.textContent=e;const n={weekday:"long",month:"long",day:"numeric",year:"numeric",timeZone:"UTC"};if(c.classList.contains("active")){b(c);const e=t.toLocaleDateString("en-US",n);T.textContent=e}if(o.classList.contains("active")){b(o);const e=t.toLocaleDateString("ru",n);T.textContent=e}}),1e3),window.addEventListener("beforeunload",I),window.addEventListener("load",A),F(),z(),V(),jt()})();