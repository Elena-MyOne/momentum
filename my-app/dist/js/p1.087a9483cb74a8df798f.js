(()=>{"use strict";const t=document.body,e=document.querySelector(".settings"),n=document.querySelector(".settings-popup"),c=document.querySelector(".popup-close"),o=document.querySelector(".en"),i=document.querySelector(".rus"),s=document.querySelector(".language"),a=document.querySelector(".hide-widget"),r=document.querySelector(".time-widget"),l=document.querySelector(".date-widget"),d=document.querySelector(".greeting-widget"),u=document.querySelector(".quote-widget"),m=document.querySelector(".weather-widget"),y=document.querySelector(".player-widget"),v=document.querySelector(".footer"),L=document.querySelector(".weather"),g=document.querySelector(".player");function p(){o.classList.contains("active")&&(s.textContent="language:",o.textContent="en",i.textContent="rus",a.textContent="hide widget:",r.textContent="time",l.textContent="day",d.textContent="greeting",u.textContent="quote",m.textContent="weather",y.textContent="player"),i.classList.contains("active")&&(s.textContent="язык:",o.textContent="анг",i.textContent="ру",a.textContent="скрыть виджет:",r.textContent="время",l.textContent="день",d.textContent="приветствие",u.textContent="цитата",m.textContent="погода",y.textContent="плеер")}function f(t){t.classList.toggle("active")}function S(t){t.target===r&&(f(r),j.style.opacity=0),t.target===l&&(f(l),T.style.opacity=0),t.target===d&&(f(d),E.style.opacity=0),t.target===u&&(f(u),v.style.opacity=0),t.target===m&&(f(m),L.style.opacity=0),t.target===y&&(f(y),g.style.opacity=0)}function h(t){t.target===r&&r.classList.contains("active")&&(j.style.opacity=1),t.target===l&&l.classList.contains("active")&&(T.style.opacity=1),t.target===d&&d.classList.contains("active")&&(E.style.opacity=1),t.target===u&&u.classList.contains("active")&&(v.style.opacity=1),t.target===m&&m.classList.contains("active")&&(L.style.opacity=1),t.target===y&&y.classList.contains("active")&&(g.style.opacity=1)}e.addEventListener("click",(function(){e.style.display="none",n.classList.add("active")})),c.addEventListener("click",(function(){e.style.display="block",n.classList.remove("active")})),o.addEventListener("click",(()=>{i.classList.remove("active"),o.classList.add("active")})),o.addEventListener("click",p),i.addEventListener("click",(()=>{o.classList.remove("active"),i.classList.add("active")})),i.addEventListener("click",p),r.addEventListener("click",S),r.addEventListener("click",h),l.addEventListener("click",S),l.addEventListener("click",h),d.addEventListener("click",S),d.addEventListener("click",h),u.addEventListener("click",S),u.addEventListener("click",h),m.addEventListener("click",S),m.addEventListener("click",h),y.addEventListener("click",S),y.addEventListener("click",h);const q=new Date,C=document.querySelector(".greeting"),x=q.getHours(),w=document.querySelector(".name"),E=document.querySelector(".greeting-container");function k(){return x>=0&&x<=5?"night":x>=6&&x<=11?"morning":x>=12&&x<=17?"afternoon":x>=18&&x<=23?"evening":void 0}const $=`Good ${k()},`,b=x>=0&&x<=5?"Доброй ночи,":x>=6&&x<=11?"Доброго утра,":x>=12&&x<=17?"Добрый день,":x>=18&&x<=23?"Добрый вечер,":void 0;function I(t){(o.classList.contains("active")||t===o)&&(C.textContent=$,w.setAttribute("placeholder","[Enter name]")),(i.classList.contains("active")||t===i)&&(C.textContent=b,w.setAttribute("placeholder","[Имя]"))}function A(){localStorage.setItem("name",w.value)}function M(){localStorage.getItem("name")&&(w.value=localStorage.getItem("name"))}i.addEventListener("click",I),o.addEventListener("click",I),window.addEventListener("beforeunload",A),window.addEventListener("load",M);const j=document.querySelector(".time"),T=document.querySelector(".date");function W(t,e){return Math.floor(Math.random()*(e-t)+t)}const D=document.querySelector(".slide-prev"),F=document.querySelector(".slide-next");let H=W(1,20);function R(){const e=k();let n=H;n<10&&(n=`0${n}`);const c=new Image;c.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${n}.jpg`,c.onload=()=>{t.style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${n}.jpg')`}}F.addEventListener("click",(function(){return R(),20===H?H=1:H+=1})),D.addEventListener("click",(function(){return R(),1===H?H=20:H-=1}));const U=document.querySelector(".weather-icon"),X=document.querySelector(".temperature"),Y=document.querySelector(".weather-description"),G=document.querySelector(".city"),N=document.querySelector(".wind"),Z=document.querySelector(".humidity"),z=document.querySelector(".weather-error"),B=document.querySelector(".weather");async function J(){let t;o.classList.contains("active")?G.setAttribute("value","Minsk"):i.classList.contains("active")&&G.setAttribute("value","Минск"),o.classList.contains("active")&&(t=`https://api.openweathermap.org/data/2.5/weather?q=${G.value}&lang=en&appid=e40bb5f53a4497757c0fd52d1d0219d3&units=imperial`),i.classList.contains("active")&&(t=`https://api.openweathermap.org/data/2.5/weather?q=${G.value}&lang=ru&appid=e40bb5f53a4497757c0fd52d1d0219d3&units=metric`);const e=await fetch(t),n=await e.json();try{K(),U.className="weather-icon owf",U.classList.add(`owf-${n.weather[0].id}`),o.classList.contains("active")&&(X.textContent=`${Math.floor(n.main.temp)}°F`,N.textContent=`Wind speed: ${Math.floor(n.wind.speed)} mph`,Z.textContent=`Humidity: ${n.main.humidity}%`),i.classList.contains("active")&&(X.textContent=`${Math.floor(n.main.temp)}°C`,N.textContent=`Скорость ветра: ${Math.floor(n.wind.speed)} m/s`,Z.textContent=`Влажность: ${n.main.humidity}%`),Y.textContent=n.weather[0].description}catch(t){o.classList.contains("active")&&(z.textContent="Error! City not found"),i.classList.contains("active")&&(z.textContent="Ошибка! Город не найден"),X.classList.add("hidden"),Y.classList.add("hidden"),N.classList.add("hidden"),Z.classList.add("hidden"),B.style.justifyContent="start"}}function K(){z.textContent="",X.classList.remove("hidden"),Y.classList.remove("hidden"),N.classList.remove("hidden"),Z.classList.remove("hidden"),B.style.justifyContent="start"}G.addEventListener("change",J),i.addEventListener("click",J),o.addEventListener("click",J),window.addEventListener("beforeunload",(function(){return""===G.value&&K(),localStorage.setItem("city",G.value)})),window.addEventListener("load",(function(){localStorage.getItem("city")&&(G.value=localStorage.getItem("city"),J())}));const O=document.querySelector(".change-quote"),P=document.querySelector(".quote"),Q=document.querySelector(".author");async function V(){let t;try{o.classList.contains("active")&&(t="https://type.fit/api/quotes"),i.classList.contains("active")&&(t="data.json");const e=await fetch(t),n=await e.json();if(o.classList.contains("active")){let t=W(0,1642);P.textContent=`"${n[t].text}"`,null===n[t].author?Q.textContent="Anonymous":Q.textContent=n[t].author}if(i.classList.contains("active")){let t=W(0,20);P.textContent=`"${n[t].text}"`,Q.textContent=`${n[t].author}`}}catch(t){o.classList.contains("active")&&(P.textContent="Error! quote not found"),i.classList.contains("active")&&(P.textContent="Ошибка! Цитата не найдена"),Q.textContent=""}}O.addEventListener("click",V),i.addEventListener("click",V),o.addEventListener("click",V);const _=[{title:"Aqua Caelestis",src:"assets/sounds/Aqua Caelestis.mp3",duration:"00:39"},{title:"Ennio Morricone",src:"assets/sounds/Ennio Morricone.mp3",duration:"01:37"},{title:"River Flows In You",src:"assets/sounds/River Flows In You.mp3",duration:"01:37"},{title:"Summer Wind",src:"assets/sounds/Summer Wind.mp3",duration:"01:50"}],tt=(document.querySelector(".player-controls"),document.querySelector(".play-prev")),et=document.querySelector(".play"),nt=document.querySelector(".play-next"),ct=document.querySelector(".play-list"),ot=document.querySelector(".song"),it=document.querySelector(".progress"),st=document.querySelector(".progress-cotainer"),at=document.querySelector(".volume"),rt=(document.querySelector(".volume-off"),document.querySelector(".volume-cotainer")),lt=document.querySelector(".volume-progress"),dt=document.querySelector(".time-current"),ut=document.querySelector(".time-duration");let mt=!1,yt=0;const vt=new Audio;function Lt(){vt.src=_[yt].src,vt.currentTime=0,vt.play(),mt=!0,Et(yt)}function gt(){!1===mt?Lt():(vt.pause(),mt=!1,kt(yt)),ht()}function pt(){et.classList.toggle("pause")}function ft(){yt===_.length-1?yt=0:yt+=1,xt(yt),Et(yt),!0===mt&&Lt(),!1===mt&&kt(yt),St(),ht()}function St(){return ot.textContent=_[yt].title}function ht(){const t=_[yt].duration;return ut.textContent=t}setInterval((function(t){if(!0===mt){const t=function(t){let e=parseInt(t),n=parseInt(e/60);e-=60*n;const c=parseInt(n/60);return n-=60*c,0===c?`${String(n).padStart(2,0)}:${String(e%60).padStart(2,0)}`:`${String(c).padStart(2,0)}:${String(n).padStart(2,0)}:${String(e%60).padStart(2,0)}`}(vt.currentTime);return dt.textContent=`${t}`}}),1e3),_.forEach(((t,e)=>{!function(t){const e=document.createElement("li");e.classList.add("play-item","play-single-item"),e.textContent=`${_[t].title}`,ct.append(e)}(e)}));const qt=document.querySelectorAll(".play-item"),Ct=Array.from(qt);function xt(t){Ct.forEach((t=>{t.classList.remove("active")})),Ct[t].classList.add("active")}qt[0].classList.add("active"),et.addEventListener("click",gt),et.addEventListener("click",pt),nt.addEventListener("click",ft),tt.addEventListener("click",(function(){0===yt?yt=_.length-1:yt-=1,xt(yt),Et(yt),!0===mt&&Lt(),!1===mt&&kt(yt),St(),ht()})),vt.addEventListener("ended",ft),vt.addEventListener("timeupdate",(function(t){const{duration:e,currentTime:n}=t.srcElement,c=n/e*100;it.style.width=`${c}%`})),st.addEventListener("click",(function(t){const e=this.clientWidth,n=t.offsetX,c=vt.duration;!0===mt&&(vt.currentTime=n/e*c)})),at.addEventListener("click",(function(){!1===vt.muted?vt.muted=!0:vt.muted=!1,at.classList.toggle("volume-off")})),rt.addEventListener("click",(function(t){const e=this.clientWidth,n=t.offsetX,c=n/e*100;vt.volume=n/e,lt.style.width=`${c}%`}));const wt=document.querySelectorAll(".play-single-item");function Et(t){wt.forEach((t=>{t.classList.remove("pause-single-item")})),wt[t].classList.toggle("pause-single-item")}function kt(t){wt[t].classList.remove("pause-single-item")}ct.addEventListener("click",(t=>{let e=t.target.closest(".play-item");e&&(e.textContent===_[0].title&&(yt=0),e.textContent===_[1].title&&(yt=1),e.textContent===_[2].title&&(yt=2),e.textContent===_[3].title&&(yt=3),gt(),St(),pt())})),setInterval((function(){const t=new Date,e=t.toLocaleTimeString();j.textContent=e;const n={weekday:"long",month:"long",day:"numeric",year:"numeric",timeZone:"UTC"};if(o.classList.contains("active")){I(o);const e=t.toLocaleDateString("en-US",n);T.textContent=e}if(i.classList.contains("active")){I(i);const e=t.toLocaleDateString("ru",n);T.textContent=e}}),1e3),window.addEventListener("beforeunload",A),window.addEventListener("load",M),R(),J(),V()})();